###################################################
# TEST
###################################################
server:
  port: 8080

spring:
  application:
    name: payback
  profiles:
    include: database
    active: test
  jpa:
    hibernate:
      show_sql: true
      format_sql: true
      inspect_stacktrace: true
      naming_physical_strategy: org.hibernate.boot.entity.naming.PhysicalNamingStrategyStandardImpl  #naming.physical-strategy
  redis:
    host: localhost
    port: 6379
    timeout: 1

logging:
  pattern:
    console: "[%-20(%cyan(%date{HH:mm:ss.SSS})] [%thread]) [%X{moa.requestid}] %highlight(%-5level) %magenta(%marker|%logger{36}): %msg%n%rEx" # console pattern
  level:
    root: DEBUG
    com.ebaykorea.saturn: DEBUG
    MoAAppender: INFO
    MoALogger: INFO

apis:
  reward:
    url: http://rewardservice-dev.gmarket.co.kr
  test:
    url: https://start-saturn.ebaykorea.com/api/config


###################################################
# feign Configurations
###################################################
feign:
  httpclient:
    enabled: true
    maxConnections: 1000
    maxConnectionsPerRoute: 100
  circuitbreaker.enabled: false
  client.config:
    default:
      connectTimeout: 5000  # resilience4j timeoutDuration 보다 커야 함.
      readTimeout: 5000
  compression:
    request:
      enabled: true
      mime-types:
        - application/json
      min-request-size: 2048
    response:
      enabled: true

# Resilience4j Configurations
# 설정관련 - https://sabarada.tistory.com/206
resilience4j.timelimiter:
  configs:
    default:
      timeoutDuration: 3s
      cancelRunningFuture: true
  instances:
    retryApi:
      baseConfig: default
      timeoutDuration: 900ms


###################################################
# MoA Configurations
###################################################
saturn:
  groupId: com.ebaykorea
  artifactId: reward
  moa:
    domainGroup: gmkt
    domain: gmkt.reward.api
    host: http://devmoafw.ebaykorea.com